@if (flow$ | async) {
    <form [formGroup]="form" (submit)="onSubmit()" class="flex flex-col gap-2">
        @for (node of formWrapper.renderAll(); track $index) {
            @switch (node.type) {
                @case ('text') {
                    <ory-text [node]="node" />
                }
                @case ('input') {
                    <ory-input [formControlName]="formWrapper.inputAttr(node).name"
                               [node]="node"/>
                }
                @case ('img') {
                    {{ node.attributes | json }}
                }
                @case ('a') {
                    <ory-link [node]="node" />
                }
                @case ('script') {
                    {{ node.attributes | json }}
                }
                @default {
                    <div>Undefined node type: {{ node.type }}</div>
                }
            }
        }
        @for (msg of formWrapper.getMessages(); track $index) {
            <ui-text-message [msg]="msg"/>
        }
    </form>
} @else {
    loading...
}
